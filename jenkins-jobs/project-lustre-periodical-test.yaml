---
- project:
    name: 'test-periodically'
    branch_distro:
      - 'master-rhel8':
          branch: 'master'
      - 'master-rhel9':
          dist: 'el9'
          branch: 'master'
      - 'b2_15-rhel8':
          branch: 'b2_15'
      - 'master-oe2003':
          dist: 'oe2003sp3'
          branch: 'master'
      - 'master-oe2203':
          dist: 'oe2203sp2'
          branch: 'master'
      - 'b2_15-oe2003':
          dist: 'oe2003sp3'
          branch: 'b2_15'
      - 'b2_15-oe2203':
          dist: 'oe2203sp2'
          branch: 'b2_15'
    jobs:
      - '{name}-{what}-{branch_distro}'

- job-template:
    name: '{name}-{what}-{branch_distro}'
    what: 'lustre'
    project-type: pipeline
    trigger_time: |
      TZ=Asia/Shanghai
      0 18 * * *
    dist: 'el8'
    triggers:
      - timed: |
          {trigger_time}

    dsl:
      !include-raw: scripts/lustre-test-pipeline.groovy
