---
- project:
    name: 'test-periodically'
    branch_distro:
      - 'master-rhel8':
          branch: 'master'
          dist: 'el8'
          kernel_version: 'kernel-4.18.0-513.9.1.el8_9'
      - 'master-rhel9':
          dist: 'el9'
          branch: 'master'
          kernel_version: 'kernel-5.14.0-284.30.1.el9_2'
      - 'master-oe2003':
          dist: 'oe2003sp3'
          branch: 'master'
          kernel_version: 'kernel-4.19.90-2309.5.0.0220.oe1'
      - 'master-oe2203':
          dist: 'oe2203sp2'
          branch: 'master'
          kernel_version: 'kernel-5.10.0-153.28.0.105.oe2203sp2'
      - 'b2_15-rhel8':
          branch: 'b2_15'
      - 'b2_15-oe2003':
          dist: 'oe2003sp3'
          branch: 'b2_15'
          kernel_version: 'kernel-4.19.90-2311.4.0.0227.oe1'
      - 'b2_15-oe2203':
          dist: 'oe2203sp2'
          branch: 'b2_15'
          kernel_version: 'kernel-5.10.0-153.33.0.110.oe2203sp2'
    jobs:
      - '{name}-{what}-{branch_distro}'

- job-template:
    name: '{name}-{what}-{branch_distro}'
    what: 'lustre'
    project-type: pipeline
    trigger_time: |
      TZ=Asia/Shanghai
      0 18 * * *
    dist: 'el8'
    triggers:
      - timed: |
          {trigger_time}
    kernel_version: ''

    dsl:
      !include-raw: scripts/lustre-test-pipeline.groovy
